<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="zh">
<head>
<!-- Generated by javadoc (1.8.0_60) on Fri Nov 24 23:07:03 HKT 2017 -->
<title>MainThread</title>
<meta name="date" content="2017-11-24">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="MainThread";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MainThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../AppKickstarter/myThreads/InThread.html" title="class in AppKickstarter.myThreads"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../AppKickstarter/myThreads/OutThread.html" title="class in AppKickstarter.myThreads"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?AppKickstarter/myThreads/MainThread.html" target="_top">Frames</a></li>
<li><a href="MainThread.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">AppKickstarter.myThreads</div>
<h2 title="Class MainThread" class="title">Class MainThread</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../AppKickstarter/misc/AppThread.html" title="class in AppKickstarter.misc">AppKickstarter.misc.AppThread</a></li>
<li>
<ul class="inheritance">
<li>AppKickstarter.myThreads.MainThread</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">MainThread</span>
extends <a href="../../AppKickstarter/misc/AppThread.html" title="class in AppKickstarter.misc">AppThread</a></pre>
<div class="block">MainThread class object main thread contains the logic of preparing out message base on in message.
 It is encapsulated inside our server and has no direct connection with network.
 It is the real handler of messages.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>sunjingxuan</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#cid">cid</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#details">details</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) java.lang.String[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#instrs">instrs</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#intype">intype</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#isTooLong">isTooLong</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#nPersons">nPersons</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#queue2long">queue2long</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#sPerson">sPerson</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#successfulTran">successfulTran</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) <a href="../../AppKickstarter/TableGUI.html" title="class in AppKickstarter">TableGUI</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#t">t</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#ticketAckNo">ticketAckNo</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#ticketIssueNo">ticketIssueNo</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#tid">tid</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#tidstr">tidstr</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#totalPerson">totalPerson</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>(package private) int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#totalSpd">totalSpd</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>(package private) double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#totalTrans">totalTrans</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.AppKickstarter.misc.AppThread">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;AppKickstarter.misc.<a href="../../AppKickstarter/misc/AppThread.html" title="class in AppKickstarter.misc">AppThread</a></h3>
<code><a href="../../AppKickstarter/misc/AppThread.html#id">id</a>, <a href="../../AppKickstarter/misc/AppThread.html#log">log</a>, <a href="../../AppKickstarter/misc/AppThread.html#main">main</a>, <a href="../../AppKickstarter/misc/AppThread.html#mbox">mbox</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#MainThread-java.lang.String-AppKickstarter.Main-AppKickstarter.TableGUI-">MainThread</a></span>(java.lang.String&nbsp;id,
          <a href="../../AppKickstarter/Main.html" title="class in AppKickstarter">Main</a>&nbsp;main,
          <a href="../../AppKickstarter/TableGUI.html" title="class in AppKickstarter">TableGUI</a>&nbsp;t)</code>
<div class="block">Class constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../AppKickstarter/myThreads/MainThread.html#run--">run</a></span>()</code>
<div class="block">Keeps receiving messages from inThread through MBox.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.AppKickstarter.misc.AppThread">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;AppKickstarter.misc.<a href="../../AppKickstarter/misc/AppThread.html" title="class in AppKickstarter.misc">AppThread</a></h3>
<code><a href="../../AppKickstarter/misc/AppThread.html#getID--">getID</a>, <a href="../../AppKickstarter/misc/AppThread.html#getMBox--">getMBox</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="instrs">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>instrs</h4>
<pre>java.lang.String[] instrs</pre>
</li>
</ul>
<a name="intype">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>intype</h4>
<pre>java.lang.String intype</pre>
</li>
</ul>
<a name="details">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>details</h4>
<pre>java.lang.String details</pre>
</li>
</ul>
<a name="cid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cid</h4>
<pre>java.lang.String cid</pre>
</li>
</ul>
<a name="nPersons">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nPersons</h4>
<pre>int nPersons</pre>
</li>
</ul>
<a name="ticketAckNo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ticketAckNo</h4>
<pre>int ticketAckNo</pre>
</li>
</ul>
<a name="ticketIssueNo">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ticketIssueNo</h4>
<pre>int ticketIssueNo</pre>
</li>
</ul>
<a name="tid">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tid</h4>
<pre>int tid</pre>
</li>
</ul>
<a name="tidstr">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tidstr</h4>
<pre>java.lang.String tidstr</pre>
</li>
</ul>
<a name="isTooLong">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTooLong</h4>
<pre>boolean isTooLong</pre>
</li>
</ul>
<a name="t">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>t</h4>
<pre><a href="../../AppKickstarter/TableGUI.html" title="class in AppKickstarter">TableGUI</a> t</pre>
</li>
</ul>
<a name="successfulTran">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>successfulTran</h4>
<pre>double successfulTran</pre>
</li>
</ul>
<a name="queue2long">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queue2long</h4>
<pre>double queue2long</pre>
</li>
</ul>
<a name="totalTrans">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>totalTrans</h4>
<pre>double totalTrans</pre>
</li>
</ul>
<a name="totalPerson">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>totalPerson</h4>
<pre>int totalPerson</pre>
</li>
</ul>
<a name="sPerson">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sPerson</h4>
<pre>int sPerson</pre>
</li>
</ul>
<a name="totalSpd">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>totalSpd</h4>
<pre>int totalSpd</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MainThread-java.lang.String-AppKickstarter.Main-AppKickstarter.TableGUI-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MainThread</h4>
<pre>public&nbsp;MainThread(java.lang.String&nbsp;id,
                  <a href="../../AppKickstarter/Main.html" title="class in AppKickstarter">Main</a>&nbsp;main,
                  <a href="../../AppKickstarter/TableGUI.html" title="class in AppKickstarter">TableGUI</a>&nbsp;t)</pre>
<div class="block">Class constructor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>id</code> - the id of main thread, no actual use</dd>
<dd><code>main</code> - the "server" object</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="run--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">Keeps receiving messages from inThread through MBox.
 Separates the message into message types and keeps a reference of useful message tokens.
 Responds differently according to message types.
 There are in total 3 types of messages that a main thread will receive, namely:

 TicketReq: on receiving TicketReq, creates a Ticket object, then puts it into corresponding client waiting queue;
 before actually putting it into queue, first checks if queue is too long;
 if queue is too long, sends QueueTooLong to outThread; if not, sends TicketRep.

 TicketAck: on receiving TicketAck, finds the corresponding queue according to nPersons;
 finds in the queue the Ticket according to ticketNo by looping through the queue;
 announces to empty tables that the client ACKed by setting isACKed of this Ticket to true;
 sends TableAssign to outThread.

 CheckOut: on receiving CheckOut, finds the checked-out table thread by table number (which is set to be equal to table thread's thread id);
 the corresponding table thread will further handle the checked-out situation by itself.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="http://cslinux0.comp.hkbu.edu.hk/~comp4007/2017-18/project/ProjIntro-v03.0.pdf">"Term Project â€“ Restaurant Queuing System (v3.0)"</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/MainThread.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../AppKickstarter/myThreads/InThread.html" title="class in AppKickstarter.myThreads"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../AppKickstarter/myThreads/OutThread.html" title="class in AppKickstarter.myThreads"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?AppKickstarter/myThreads/MainThread.html" target="_top">Frames</a></li>
<li><a href="MainThread.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
